{"job":{"components":{"88618":{"id":88618,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":278,"y":192,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[88621],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"surveymonkeyresponseanswer"}}}},"visible":true},"2":{"slot":2,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"surveymonkeyresponseanswer"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"response_id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"question_id"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"answer"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"createdttm"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"survey_id"}}}},"visible":true},"4":{"slot":4,"name":"Trim Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"etl"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"88619":{"id":88619,"inputCardinality":"ZERO_OR_MANY","outputCardinality":"MANY","implementationID":-1266674941,"x":450,"y":192,"width":32,"height":32,"inputConnectorIDs":[88621],"outputConnectorIDs":[88622],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"format_responseanswer"}}}},"visible":true},"2":{"slot":2,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SELECT\nCAST(survey_id AS int) AS  surveymonkeysurveyid\n,CAST(response_id AS bigint) AS surveymonkeyresponseid\n,CAST( question_id AS int) AS surveymonkeyquestionid\n,answer AS answerjson\n,CAST(CASE WHEN json_extract_path_text(answer,'choice_id',true)='' THEN '0' ELSE json_extract_path_text(answer,'choice_id',true) END AS bigint) AS surveymonkeychoiceid\n,CAST(CASE WHEN json_extract_path_text(answer,'other_id',true)='' THEN '0' ELSE json_extract_path_text(answer,'other_id',true) END AS bigint) AS surveymonkeyotherid\n,CAST(CASE WHEN json_extract_path_text(answer,'row_id',true)='' THEN '0' ELSE json_extract_path_text(answer,'row_id',true) END AS bigint) AS surveymonkeyrowid\n,json_extract_path_text(answer,'text',true) AS answertext\n,createdttm\nFROM $T{surveymonkeyresponseanswer}"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"88620":{"id":88620,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":-1848704949,"x":640,"y":192,"width":32,"height":32,"inputConnectorIDs":[88622],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"surveymonkeysurveyresponseanswer"}}}},"visible":true},"2":{"slot":2,"name":"Target Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"surveymonkeysurveyresponseanswer"}}}},"visible":true},"3":{"slot":3,"name":"Fix Data Type Mismatches","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"4":{"slot":4,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"surveymonkeysurveyid"},"2":{"slot":2,"type":"STRING","value":"surveymonkeysurveyid"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"surveymonkeyresponseid"},"2":{"slot":2,"type":"STRING","value":"surveymonkeyresponseid"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"surveymonkeyquestionid"},"2":{"slot":2,"type":"STRING","value":"surveymonkeyquestionid"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"answerjson"},"2":{"slot":2,"type":"STRING","value":"answerjson"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"surveymonkeychoiceid"},"2":{"slot":2,"type":"STRING","value":"surveymonkeychoiceid"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"surveymonkeyotherid"},"2":{"slot":2,"type":"STRING","value":"surveymonkeyotherid"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"surveymonkeyrowid"},"2":{"slot":2,"type":"STRING","value":"surveymonkeyrowid"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"answertext"},"2":{"slot":2,"type":"STRING","value":"answertext"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"createdttm"},"2":{"slot":2,"type":"STRING","value":"createdttm"}}}},"visible":true},"5":{"slot":5,"name":"Unique Keys","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"surveymonkeysurveyid"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"surveymonkeyresponseid"}}}},"visible":true},"6":{"slot":6,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"web"}}}},"visible":true},"7":{"slot":7,"name":"Update Strategy","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Delete/Insert"}}}},"visible":true}},"exportMappings":{"1":{"slot":1,"fromId":null,"fromName":"Message","mapTo":"Errormessage"}},"expectedFailure":null,"activationStatus":"ENABLED"}},"connectors":{"88621":{"id":88621,"sourceID":88618,"targetID":88619},"88622":{"id":88622,"sourceID":88619,"targetID":88620}},"canUndo":false,"undoCommand":"","undoCreated":-1,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"88617":{"id":88617,"x":224,"y":22,"width":250,"height":58,"text":"Load survey answers into the web schema\n\nupdated:2018-06-19","colour":"e6e63c"}},"noteConnectors":{},"variables":{},"grids":{}},"info":{"name":"CSAT - SM_SurveyResponseAnswer_Load","description":"load the survey answers into the web schema","type":"TRANSFORMATION"}}