{"job":{"components":{"2462":{"id":2462,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":-384,"y":112,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[2468],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"etl.ecp"}}}},"visible":true},"2":{"slot":2,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"emailcampaignpreference"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"emailcampaignpreferenceid"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"emailcampaignid"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"customerprofileid"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"consent"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"consenttype"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"requestdatetimeutc"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"emailfrequencylist"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"emailsendcount"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"dayofweeklist"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"destinationlist"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"activeflag"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"createdatetimeutc"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"modifieddatetimeutc"}}},"14":{"slot":14,"values":{"1":{"slot":1,"type":"STRING","value":"viporternumber"}}},"15":{"slot":15,"values":{"1":{"slot":1,"type":"STRING","value":"campaigntypename"}}},"16":{"slot":16,"values":{"1":{"slot":1,"type":"STRING","value":"emailaddress"}}}},"visible":true},"4":{"slot":4,"name":"Trim Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"etl"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"2463":{"id":2463,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":-96,"y":224,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[2472],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"public.ecp"}}}},"visible":true},"2":{"slot":2,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"emailcampaignpreference"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"viporternumber"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"emailaddress"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"campaigntypename"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"emailcampaignid"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"consent"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"consenttype"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"requestdatetimeutc"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"emailfrequencylist"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"emailsentcount"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"dayofweeklist"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"destinationlist"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"activeflag"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"ecpid"}}},"14":{"slot":14,"values":{"1":{"slot":1,"type":"STRING","value":"ecpcreatedatetimeutc"}}},"15":{"slot":15,"values":{"1":{"slot":1,"type":"STRING","value":"ecpmodifieddatetimeutc"}}},"16":{"slot":16,"values":{"1":{"slot":1,"type":"STRING","value":"emailcampaignpreferenceid"}}},"17":{"slot":17,"values":{"1":{"slot":1,"type":"STRING","value":"createdttm"}}}},"visible":true},"4":{"slot":4,"name":"Trim Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"public"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"2464":{"id":2464,"inputCardinality":"TWO","outputCardinality":"MANY","implementationID":-359894709,"x":128,"y":176,"width":32,"height":32,"inputConnectorIDs":[2469,2472],"outputConnectorIDs":[2471],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"cdc"}}}},"visible":true},"2":{"slot":2,"name":"Master Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"public.ecp"}}}},"visible":true},"3":{"slot":3,"name":"Match Keys","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ecpid"}}}},"visible":true},"4":{"slot":4,"name":"Compare Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"consent"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"emailcampaignid"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"consenttype"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"emailfrequencylist"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"dayofweeklist"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"destinationlist"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"activeflag"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"viporternumber"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"campaigntypename"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"emailaddress"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"requestdatetimeutc"}}}},"visible":true},"5":{"slot":5,"name":"Output Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"master_ecpmodifieddatetimeutc"},"2":{"slot":2,"type":"STRING","value":"ecpmodifieddatetimeutc_old"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"compare_ecpmodifieddatetimeutc"},"2":{"slot":2,"type":"STRING","value":"ecpmodifieddatetimeutc"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"compare_viporternumber"},"2":{"slot":2,"type":"STRING","value":"viporternumber"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"compare_emailaddress"},"2":{"slot":2,"type":"STRING","value":"emailaddress"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"compare_campaigntypename"},"2":{"slot":2,"type":"STRING","value":"campaigntypename"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"compare_consent"},"2":{"slot":2,"type":"STRING","value":"consent"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"compare_consenttype"},"2":{"slot":2,"type":"STRING","value":"consenttype"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"compare_requestdatetimeutc"},"2":{"slot":2,"type":"STRING","value":"requestdatetimeutc"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"compare_emailfrequencylist"},"2":{"slot":2,"type":"STRING","value":"emailfrequencylist"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"compare_emailsendcount"},"2":{"slot":2,"type":"STRING","value":"emailsentcount"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"compare_dayofweeklist"},"2":{"slot":2,"type":"STRING","value":"dayofweeklist"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"compare_destinationlist"},"2":{"slot":2,"type":"STRING","value":"destinationlist"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"compare_activeflag"},"2":{"slot":2,"type":"STRING","value":"activeflag"}}},"14":{"slot":14,"values":{"1":{"slot":1,"type":"STRING","value":"compare_createdatetimeutc"},"2":{"slot":2,"type":"STRING","value":"ecpcreatedatetimeutc"}}},"15":{"slot":15,"values":{"1":{"slot":1,"type":"STRING","value":"compare_emailcampaignid"},"2":{"slot":2,"type":"STRING","value":"emailcampaignid"}}}},"visible":true},"6":{"slot":6,"name":"Indicator Column","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Indicator"}}}},"visible":true},"7":{"slot":7,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"2465":{"id":2465,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":211954775,"x":416,"y":176,"width":32,"height":32,"inputConnectorIDs":[2470],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"emailcampaignpreference"}}}},"visible":true},"2":{"slot":2,"name":"Target Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"emailcampaignpreference"}}}},"visible":true},"3":{"slot":3,"name":"Fix Data Type Mismatches","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"4":{"slot":4,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"viporternumber"},"2":{"slot":2,"type":"STRING","value":"viporternumber"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"emailaddress"},"2":{"slot":2,"type":"STRING","value":"emailaddress"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"campaigntypename"},"2":{"slot":2,"type":"STRING","value":"campaigntypename"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"consent"},"2":{"slot":2,"type":"STRING","value":"consent"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"consenttype"},"2":{"slot":2,"type":"STRING","value":"consenttype"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"requestdatetimeutc"},"2":{"slot":2,"type":"STRING","value":"requestdatetimeutc"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"emailfrequencylist"},"2":{"slot":2,"type":"STRING","value":"emailfrequencylist"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"emailsentcount"},"2":{"slot":2,"type":"STRING","value":"emailsentcount"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"dayofweeklist"},"2":{"slot":2,"type":"STRING","value":"dayofweeklist"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"destinationlist"},"2":{"slot":2,"type":"STRING","value":"destinationlist"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"activeflag"},"2":{"slot":2,"type":"STRING","value":"activeflag"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"ecpid"},"2":{"slot":2,"type":"STRING","value":"ecpid"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"ecpcreatedatetimeutc"},"2":{"slot":2,"type":"STRING","value":"ecpcreatedatetimeutc"}}},"14":{"slot":14,"values":{"1":{"slot":1,"type":"STRING","value":"ecpmodifieddatetimeutc"},"2":{"slot":2,"type":"STRING","value":"ecpmodifieddatetimeutc"}}},"15":{"slot":15,"values":{"1":{"slot":1,"type":"STRING","value":"ecpmodifieddatetimeutc_old"},"2":{"slot":2,"type":"STRING","value":"ecpmodifieddatetimeutc_old"}}},"16":{"slot":16,"values":{"1":{"slot":1,"type":"STRING","value":"indicator"},"2":{"slot":2,"type":"STRING","value":"indicator"}}},"17":{"slot":17,"values":{"1":{"slot":1,"type":"STRING","value":"emailcampaignid"},"2":{"slot":2,"type":"STRING","value":"emailcampaignid"}}}},"visible":true},"5":{"slot":5,"name":"Truncate","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Truncate"}}}},"visible":true},"6":{"slot":6,"name":"Automatic Compression","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"7":{"slot":7,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"stage"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"2466":{"id":2466,"inputCardinality":"ZERO_OR_MANY","outputCardinality":"MANY","implementationID":-1266674941,"x":272,"y":176,"width":32,"height":32,"inputConnectorIDs":[2471],"outputConnectorIDs":[2470],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SQL 0"}}}},"visible":true},"2":{"slot":2,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SELECT * FROM $T{cdc} WHERE indicator IN ('C', 'N')"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"2467":{"id":2467,"inputCardinality":"ZERO_OR_MANY","outputCardinality":"MANY","implementationID":-1266674941,"x":-112,"y":112,"width":32,"height":32,"inputConnectorIDs":[2468],"outputConnectorIDs":[2469],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SQL 1"}}}},"visible":true},"2":{"slot":2,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SELECT \n  \"emailcampaignpreferenceid\" AS \"ecpid\", \n  \"emailcampaignid\", \n  \"customerprofileid\", \n  \"consent\", \n  \"consenttype\", \n  \"requestdatetimeutc\", \n  \"emailfrequencylist\", \n  \"emailsendcount\", \n  \"dayofweeklist\", \n  \"destinationlist\", \n  \"activeflag\", \n  \"createdatetimeutc\", \n  \"modifieddatetimeutc\" AS \"ecpmodifieddatetimeutc\", \n  \"viporternumber\", \n  \"campaigntypename\", \n  \"emailaddress\"\n  --public.f_formatemail(emailaddress) as emailaddress \nFROM $T{etl.ecp}\n--FROM emailcampaignpreference"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"}},"connectors":{"2468":{"id":2468,"sourceID":2462,"targetID":2467},"2469":{"id":2469,"sourceID":2467,"targetID":2464},"2470":{"id":2470,"sourceID":2466,"targetID":2465},"2471":{"id":2471,"sourceID":2464,"targetID":2466},"2472":{"id":2472,"sourceID":2463,"targetID":2464}},"canUndo":true,"undoCommand":"Set Parameter","undoCreated":1566401510875,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"2461":{"id":2461,"x":-200,"y":-42,"width":578,"height":86,"text":"Load the changes into campaign preferences staging include the indicator field (N means new record and C means changed record)\n\nemailcampaignid and ecpmodifieddatetimeutc are used in determine the updated email campaign preference. ","colour":"e6e63c"}},"noteConnectors":{},"variables":{},"grids":{}},"info":{"name":"Email - EmailCamaignPreference_load","description":null,"type":"TRANSFORMATION"}}